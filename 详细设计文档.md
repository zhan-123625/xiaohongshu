# 小红书克隆 — 详细设计文档

最后更新：2025-12-27

本文档补充并完善“我的”界面、评论模块以及整体界面美化的详细设计与实现要点，面向前端（Android 客户端）与后端（NestJS/TypeORM）开发人员和测试人员。

## 一、总体目标

- 为 App 增加“我的”页面（用户自定义资料、我的笔记、喜欢的笔记、设置与注销）。
- 实现评论功能（查看、发布、分页、简单回复、删除/审查）。
- 对客户端进行界面美化：配色体系、统一的布局间距、占位图、按钮样式、动效与交互细化。

## 二、约定与契约（Contract）

- 客户端输入：用户操作（打开页面、拉取/提交数据、点击交互）。
- 服务器输出：JSON REST API，使用 JWT 验证（Authorization: Bearer <token>）。
- 成功判定：API 返回 2xx，或 UI 显示预期内容；异常需展示明确错误提示并记录日志。

edge cases（要考虑的边界情况）
- 未登录用户访问需要鉴权的接口 -> 跳转登录页。
- 评论为空或网络错误 -> 显示空状态或重试。
- 大量评论 -> 分页或延迟加载，避免内存泄漏。

## 三、后端（Server）改动

### 3.1 数据模型（新增 `comments`, `messages`, `blocks` 表）

示例 SQL migration（MySQL）：

```sql
CREATE TABLE comments (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  note_id BIGINT NOT NULL,
  user_id BIGINT NOT NULL,
  parent_id BIGINT DEFAULT NULL,
  content TEXT NOT NULL,
  status TINYINT DEFAULT 1, -- 1:可见, 0:删除/屏蔽
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (note_id) REFERENCES notes(id),
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (parent_id) REFERENCES comments(id)
);

CREATE TABLE messages (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  sender_id BIGINT NOT NULL,
  receiver_id BIGINT NOT NULL,
  content TEXT NOT NULL,
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (sender_id) REFERENCES users(id),
  FOREIGN KEY (receiver_id) REFERENCES users(id)
);

CREATE TABLE blocks (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  blocker_id BIGINT NOT NULL,
  blocked_id BIGINT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (blocker_id) REFERENCES users(id),
  FOREIGN KEY (blocked_id) REFERENCES users(id)
);
```

注意：为简化实现，暂只实现一层回复（parent_id 可选）。

### 3.2 TypeORM 实体示例

（附录中给出完整示例实体，新增 `Message` 和 `Block` 实体）

### 3.3 API 设计

#### 评论相关
- GET /notes/:noteId/comments?page=1&limit=20 — 获取评论（分页，按 created_at 升/降序）
- POST /notes/:noteId/comments — 发表评论（body: { content, parentId? }）
- DELETE /comments/:id — 删除评论（仅本人或管理员）

#### 消息与社交相关
- POST /messages — 发送私信（body: { receiverId, content }）
- GET /messages/:userId — 获取与某人的聊天记录
- GET /messages/conversations — 获取最近会话列表
- POST /users/:id/block — 拉黑用户
- POST /users/:id/unblock — 取消拉黑
- GET /users/notifications/unread-counts — 获取各类未读消息计数
- POST /users/notifications/mark-read — 标记某类消息为已读

示例请求/返回（POST 评论成功）：

```json
POST /notes/123/comments
Body: { "content": "很棒的笔记！", "parentId": null }

Response 201:
{
  "id": 456,
  "noteId": 123,
  "userId": 1,
  "content": "很棒的笔记！",
  "createdAt": "2025-12-27T10:00:00Z"
}
```

### 3.4 权限与验证

- 发表评论、删除评论需携带有效 JWT。后端返回 401 表示未认证，403 表示无权限。
- 评论长度限制：例如 1024 字符。防刷限频：同一用户 1分钟内发言不超过 N 条（N 可配置）。

## 四、客户端（Android）设计

总体采用 MVVM + Hilt + Retrofit + OkHttp + Room/缓存（如需）

### 4.1 新增 Fragment 与 ViewModel

- `MeFragment` + `MeViewModel`
  - 页面包含：用户信息头部（头像、用户名、签名、编辑按钮）、统计条（笔记数、粉丝、关注）、我的笔记列表（RecyclerView）、我喜欢的笔记（分页/标签切换）、设置按钮/登出按钮。
  - 交互：点击“关注”/“粉丝”跳转至 `UserListFragment`，点击“获赞与收藏”跳转至 `InteractionListFragment`。
  - `MeViewModel` 提供：getProfile(), getMyNotes(page), getLikedNotes(page), logout(), updateProfile()

- `UserListFragment` + `UserListViewModel`
  - 功能：展示“关注”或“粉丝”列表。
  - 交互：列表项包含“关注/取消关注”、“私信”、“拉黑”（仅粉丝页）按钮。
  - 数据：支持分页加载，操作后局部刷新。

- `InteractionListFragment` + `InteractionListViewModel`
  - 功能：展示收到的“赞”和“收藏”通知。
  - 交互：点击列表项跳转至对应的笔记详情页。
  - 逻辑：进入页面自动标记相关通知为已读。

- `MessageFragment` + `MessageViewModel`
  - 功能：消息主页。
  - 布局：顶部三个入口（赞和收藏、新增关注、评论和@），下方为私信会话列表。
  - 交互：点击顶部入口跳转对应列表页，点击会话跳转 `ChatFragment`。

- `ChatFragment` + `ChatViewModel`
  - 功能：私信聊天页。
  - 布局：RecyclerView 展示消息气泡（左收右发），底部输入框。
  - 逻辑：实时（或轮询）获取消息，发送消息后追加到列表。

- `CommentsFragment` 或 在 `NoteDetailFragment` 内的评论面板
  - 评论列表使用 `RecyclerView`，每项包含：评论者头像、用户名、时间、内容、回复按钮（弹出输入框）、删除按钮（本人）
  - 输入框固定在底部（含发送按钮），在软键盘弹出时自动上移。

### 4.2 布局要点（UI 组件）

- 统一导航栏高度与内容内边距。
- 头像：圆形，建议 56dp（profile header）和 40dp（列表）两套尺寸。
- 字体：标题 16sp（加粗），正文 14sp，时间/辅助 12sp（灰色）。
- 行间距与行高按 4dp 基线网格对齐。
- 卡片/笔记封面：圆角 8dp，阴影或投影使用 Material Card。

### 4.3 交互细节

- 下拉刷新：`SwipeRefreshLayout`（或 Material 的 refresh）用于列表刷新。
- 分页：RecyclerView + Paging3（推荐）或手动实现基于 page/limit 的加载更多。
- 发送评论后：乐观更新（在 UI 先插入一条 loading 状态的 comment），后台确认后替换/回滚。
- 回复：点击回复按钮设置输入框的 `parentId`，显示“回复 @用户名”提示。

### 4.4 网络与缓存

- 使用 Retrofit + OkHttp。AuthInterceptor 加入 Authorization header。
- 对于评论列表，缓存策略：短期内（如 30s）使用内存缓存避免重复请求；在网络策略或 pull-to-refresh 时更新。

### 4.5 错误处理与提示

- 网络失败：Toast 或 SnackBar 提示并显示重试按钮（针对加载失败的列表项可单独加载重试）。
- 表单校验：评论为空或超长阻止提交并提示。

## 五、界面美化规范（Design Tokens）

### 5.1 配色（示例）

- 主色 Primary：#FF3E6C（品牌红/粉色）
- 次色 Accent：#FF8DA1
- 背景色：#FFFFFF（浅），深色模式背景 #0F1720
- 文本主色：#111827，次色 #6B7280

### 5.2 字体与图标

- 使用系统或 Google 的 Roboto/Inter；强调处加粗（700）。
- 图标：采用 Material Icons，必要时使用自定义 svg（放到 `res/drawable`）。

### 5.3 动效

- 页面切换使用 200ms 的平移动画。
- 发送评论后的微交互（按钮点击波纹、加载占位骨架）使用 Lottie 或简单淡入淡出。

### 5.4 资源清单（需要新增文件）

- 占位头像、占位图片（400x300 jpg/png）
- 按钮/图标 svg
- Lottie 小动画（发送、加载）

## 六、评论功能实现细节

### 6.1 客户端流程（发表评论）

1. 用户在 Note 详情页面打开评论区域或点击评论按钮。
2. 客户端向 POST /notes/:id/comments 发送请求；请求携带 Authorization。若未登录，跳转到 Login。
3. 前端立即将一条“发送中”状态的临时评论插入 RecyclerView（optimistic UI）。
4. 后端返回 201，前端用真实数据替换临时项；失败则提示并删除临时项或标记为发送失败，提供“重试”按钮。

### 6.2 分页与加载更多

- 使用 Paging3 或手动实现：当滚动到列表底部时加载下一页（page++）。每页 20 条。

### 6.3 回复与删除

- 仅支持一层回复（parent_id），显示时把回复作为该评论的 inline 子项或缩进显示。
- 删除仅本人或管理员；客户端在收到 403/401 时展示相应提示。

## 七、“我的”界面详细设计

### 7.1 页面元素

- Header：
  - 背景淡色卡片，左侧头像（圆），右侧为编辑及设置图标。
  - 昵称、签名（若无则显示“还没有签名”占位）。

- 统计区：笔记数 / 粉丝 / 关注（横向三列，可点击查看对应列表）

- 列表区：分两个 tab 或 switch 控件：我的笔记 / 我喜欢的笔记。

- 底部：设置、反馈、退出登录按钮。

### 7.2 编辑资料流程

- 点击编辑进入 EditProfile 页面：支持更换头像（从相册或拍照）、修改昵称、签名、性别、地区等。
- 提交后调用 PUT /users/:id 更新资料并返回最新 profile。

### 7.3 退出登录

- 清空本地 Token（`TokenManager.clear()`），清空本地缓存/用户相关数据库，然后跳转到登录页并清空 BackStack。

## 八、测试与验收

### 8.1 单元/集成测试

- 后端：对新增 routes 编写 e2e 测试（jest + supertest），覆盖发表评论、获取分页、删除权限。
- 前端：ViewModel 单元测试（Kotlin + coroutines + MockK），关键方法（getMyNotes、postComment）的 happy path 与 error path。

### 8.2 UI 自动化

- 使用 Espresso（Android）写两条关键用例：登录 -> 查看我的页面 -> 编辑资料；登录 -> 打开某笔记 -> 发表评论 -> 评论出现在列表。

### 8.3 性能测试

- 在评论高并发场景需要对后端限流策略进行压测（例如 locust 或 artillery）。客户端需保证 RecyclerView 不会因长列表导致 OOM，用 DiffUtil 优化列表更新。

## 九、验收标准（对业务方）

- “我的”页面能正确显示当前登录用户信息并支持编辑；修改后信息立即可见。
- 评论功能支持发布、分页浏览、回复与删除（本人），端到端通过手工与自动化测试验证。
- 界面风格统一，主要页面（Home、Detail、Publish、Me、Login）达到设计规范且在常见机型（Android 8+）上无致命布局BUG。

## 十、迁移与上线步骤（建议）

1. 后端合并 PR，执行 DB migration（添加 `comments` 表）。
2. 后端运行单元测试与 e2e 测试。
3. 前端新增页面合并 PR，运行 UI 自动化测试。
4. 联调：与后端一起验证 API（postman/insomnia），验证 JWT 与鉴权逻辑。
5. 上线：小流量灰度，观察日志与错误率，扩容/调整限流策略。

## 十一、附录：示例 TypeORM 实体（comment.entity.ts）

```typescript
import { Entity, PrimaryGeneratedColumn, Column, ManyToOne, CreateDateColumn } from 'typeorm';
import { User } from './user.entity';
import { Note } from './note.entity';

@Entity('comments')
export class Comment {
  @PrimaryGeneratedColumn({ type: 'bigint' })
  id: number;

  @ManyToOne(() => Note, (note) => note.comments)
  note: Note;

  @ManyToOne(() => User, (user) => user.id)
  user: User;

  @Column({ type: 'text' })
  content: string;

  @Column({ name: 'parent_id', type: 'bigint', nullable: true })
  parentId?: number;

  @Column({ type: 'tinyint', default: 1 })
  status: number;

  @CreateDateColumn({ name: 'created_at' })
  createdAt: Date;
}
```

## 十二、下一步建议（短期优先级）

1. 后端：实现 `comments` 实体与 CRUD API（优先）、迁移脚本、并制定限流策略。
2. 前端：实现 `Comments` 区块（在 NoteDetail 中）和 `MeFragment` 基本数据展示；使用 Paging3 或基础分页先行实现功能；随后做 UI 美化。
3. 设计/产品：确认颜色、字体、图标与交互细节（最终视觉稿）。

---

如需，我可以继续：
- 生成 `src/entities/comment.entity.ts` 源文件和相关 repository/service/controller 的后端代码样板；
- 在 Android 项目中创建 `MeFragment` / `Comments` 布局与 ViewModel 样板代码，并编写基础联调用例（单元测试）。

（文档已写入仓库，文件：`详细设计文档.md`）
# 仿小红书APP详细设计文档

## 1. 引言

### 1.1 文档目的
本文档基于《功能需求文档》，详细阐述仿小红书APP的系统架构、数据库设计、接口定义及模块实现细节，为开发人员提供具体的编码指导。

### 1.2 适用范围
本设计文档适用于Android客户端开发及Node.js服务端开发。

## 2. 系统架构设计

### 2.1 总体架构
系统采用经典的 C/S（Client/Server）架构。客户端为 Android APP，服务端采用 Node.js 提供 RESTful API 服务。

### 2.2 技术选型

#### 2.2.1 客户端 (Android)
*   **开发语言**：Kotlin
*   **架构模式**：MVVM (Model-View-ViewModel)
*   **核心库**：
    *   **Jetpack组件**：Lifecycle, LiveData, ViewModel, Room, Navigation。
    *   **网络请求**：Retrofit2 + OkHttp3。
    *   **图片加载**：Glide 或 Coil。
    *   **依赖注入**：Hilt。
    *   **多媒体处理**：CameraX (拍摄), ExoPlayer (视频播放)。

#### 2.2.2 服务端 (Node.js)
*   **运行环境**：Node.js (v18+)
*   **开发框架**：NestJS (推荐) 或 Express/Koa。本设计以 **NestJS** 为例，因其结构清晰，适合企业级开发。
*   **语言**：TypeScript
*   **ORM框架**：TypeORM 或 Prisma。

#### 2.2.3 数据存储与中间件
*   **关系型数据库**：MySQL 5.7 (存储用户、笔记、评论等核心结构化数据)。
*   **缓存数据库**：Redis (用于缓存热点数据、Session会话、验证码存储)。
*   **对象存储**：本地实现

## 3. 数据库设计

### 3.1 数据库概览
核心实体包括：用户(User)、笔记(Note)、评论(Comment)、关注(Follow)、点赞(Like)、收藏(Collection)。

### 3.2 表结构设计

#### 3.2.1 用户表 (`users`)
| 字段名 | 类型 | 说明 |
| :--- | :--- | :--- |
| id | BIGINT | 主键，自增 |
| username | VARCHAR(50) | 用户名/昵称 |
| phone | VARCHAR(20) | 手机号 (唯一索引) |
| password_hash | VARCHAR(255) | 密码哈希值 |
| avatar_url | VARCHAR(255) | 头像链接 |
| bio | VARCHAR(255) | 个人简介 |
| gender | TINYINT | 性别 (0:未知, 1:男, 2:女) |
| created_at | DATETIME | 创建时间 |

#### 3.2.2 笔记表 (`notes`)
| 字段名 | 类型 | 说明 |
| :--- | :--- | :--- |
| id | BIGINT | 主键，自增 |
| user_id | BIGINT | 发布者ID (外键 -> users.id) |
| title | VARCHAR(100) | 标题 |
| content | TEXT | 正文内容 |
| type | TINYINT | 类型 (1:图文, 2:视频) |
| cover_url | VARCHAR(255) | 封面图链接 |
| location | VARCHAR(100) | 地理位置名称 |
| status | TINYINT | 状态 (0:草稿, 1:发布, 2:审核中, 3:违规) |
| created_at | DATETIME | 发布时间 |

#### 3.2.3 笔记资源表 (`note_resources`)
用于存储笔记中的多张图片或视频地址。
| 字段名 | 类型 | 说明 |
| :--- | :--- | :--- |
| id | BIGINT | 主键 |
| note_id | BIGINT | 关联笔记ID |
| url | VARCHAR(255) | 资源链接 |
| sort_order | INT | 排序顺序 |
| type | TINYINT | 资源类型 (1:图片, 2:视频) |

#### 3.2.4 评论表 (`comments`)
| 字段名 | 类型 | 说明 |
| :--- | :--- | :--- |
| id | BIGINT | 主键 |
| note_id | BIGINT | 关联笔记ID |
| user_id | BIGINT | 评论者ID |
| content | VARCHAR(1000)| 评论内容 |
| parent_id | BIGINT | 父评论ID (用于二级回复，顶级为NULL) |
| created_at | DATETIME | 评论时间 |

#### 3.2.5 互动表 (点赞/收藏/关注)
*   **点赞表 (`likes`)**: `id`, `user_id`, `target_id` (笔记ID或评论ID), `type` (1:笔记, 2:评论), `created_at`
*   **收藏表 (`collections`)**: `id`, `user_id`, `note_id`, `created_at`
*   **关注表 (`follows`)**: `id`, `follower_id` (粉丝), `following_id` (被关注者), `created_at`

## 4. 接口设计 (API)

### 4.1 规范
*   **协议**：HTTP/1.1 (HTTPS)
*   **格式**：JSON
*   **鉴权**：Bearer Token (JWT)

### 4.2 核心接口定义

#### 4.2.1 用户认证 (`/api/auth`)
*   `POST /register`: 用户注册 (参数: phone, password, code)
*   `POST /login`: 用户登录 (返回: access_token)
*   `GET /me`: 获取当前用户信息

#### 4.2.2 笔记相关 (`/api/notes`)
*   `GET /feed`: 获取首页推荐流 (参数: page, limit)
*   `POST /`: 发布笔记 (参数: title, content, images[], video_url, location)
*   `GET /:id`: 获取笔记详情
*   `DELETE /:id`: 删除笔记

#### 4.2.3 互动相关 (`/api/interactions`)
*   `POST /like`: 点赞 (参数: target_id, type)
*   `DELETE /like`: 取消点赞
*   `POST /collect`: 收藏笔记
*   `POST /comment`: 发表评论

#### 4.2.4 文件上传 (`/api/upload`)
*   `POST /image`: 上传图片 (Multipart/form-data)
*   `POST /video`: 上传视频

## 5. 模块详细设计

### 5.1 Android 客户端设计

#### 5.1.1 目录结构
```
com.example.xiaohongshu
├── api             // Retrofit 接口定义
├── data            // 数据层
│   ├── model       // 实体类 (User, Note)
│   └── repository  // 数据仓库 (处理网络与本地缓存策略)
├── di              // Hilt 依赖注入模块
├── ui              // 界面层
│   ├── home        // 首页模块 (瀑布流 Adapter)
│   ├── detail      // 详情页模块
│   ├── publish     // 发布模块 (图片选择器, 编辑页)
│   └── login       // 登录注册模块
└── utils           // 工具类 (ImageLoader, ToastUtils)
```

#### 5.1.2 关键功能实现
*   **瀑布流首页**：使用 `RecyclerView` + `StaggeredGridLayoutManager` 实现双列布局。
*   **图片选择**：集成 `PictureSelector` 或自定义实现相册读取。
*   **沉浸式体验**：详情页使用 `CoordinatorLayout` + `AppBarLayout` 实现图片视差滚动效果。

### 5.2 Node.js 服务端设计

#### 5.2.1 目录结构 (NestJS风格)
```
src
├── auth            // 认证模块 (JWT策略, Guard)
├── users           // 用户模块
├── notes           // 笔记模块
├── comments        // 评论模块
├── common          // 公共模块 (拦截器, 过滤器, DTO)
├── entities        // TypeORM 实体定义
└── main.ts         // 入口文件
```

#### 5.2.2 关键逻辑
*   **推荐算法(简化版)**：在 `NotesService` 中，查询笔记时优先按 `created_at` 倒序，后期可加入基于标签的加权查询。
*   **JWT鉴权**：使用 `@nestjs/passport` 和 `passport-jwt` 实现全局守卫 (AuthGuard)，保护非公开接口。

## 6. 安全设计
1.  **密码安全**：数据库不存储明文密码，使用 `bcrypt` 或 `argon2` 进行加盐哈希。
2.  **接口防刷**：引入 `rate-limit` 中间件，限制单IP请求频率。
3.  **输入过滤**：使用 `class-validator` 对所有 DTO (Data Transfer Object) 进行严格校验，防止 SQL 注入和 XSS 攻击。

## 十三、管理后台设计 (Admin Panel)

为了保障平台内容的合规性与安全性，需增加 Web 端管理后台，供运营人员和管理员使用。

### 13.1 目标
- **内容审核**：对用户发布的笔记、评论进行人工审核，处理违规内容。
- **用户管理**：查询用户信息，对违规用户进行封禁/解封操作。
- **数据监控**：查看平台核心数据指标（新增用户、日活、内容发布量）。

### 13.2 技术架构
- **前端**：独立 Web 项目，建议使用 React + Ant Design Pro 或 Vue + Element Plus。
- **后端**：复用现有 NestJS 服务，新增 `AdminModule`。
- **鉴权**：基于 JWT + Role (角色) 的权限控制。

### 13.3 数据库变动

#### 13.3.1 Users 表更新
新增字段以支持权限和状态管理：
```sql
ALTER TABLE users ADD COLUMN role TINYINT DEFAULT 0 COMMENT '0:普通用户, 1:管理员';
ALTER TABLE users ADD COLUMN status TINYINT DEFAULT 1 COMMENT '1:正常, 0:封禁';
```

#### 13.3.2 AdminLogs 表 (新增)
用于记录管理员的操作日志，便于审计。
```sql
CREATE TABLE admin_logs (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  admin_id BIGINT NOT NULL,
  action VARCHAR(50) NOT NULL COMMENT '操作类型: DELETE_NOTE, BAN_USER...',
  target_id BIGINT COMMENT '操作对象ID',
  details TEXT COMMENT '操作详情/备注',
  ip_address VARCHAR(45),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 13.4 核心功能模块

#### 1. 仪表盘 (Dashboard)
- **数据概览**：今日新增用户、今日新增笔记、待审核笔记数。
- **图表**：近 7 日用户增长趋势、内容发布趋势。

#### 2. 内容管理 (Content Management)
- **笔记审核**：
  - 列表展示状态为 `2:审核中` (或被举报) 的笔记。
  - 支持预览笔记详情（图片/视频/文本）。
  - 操作：**通过** (Status -> 1)、**驳回** (Status -> 3, 需填写驳回原因)、**删除** (逻辑删除)。
- **评论管理**：
  - 列表展示最新评论，支持按关键词搜索。
  - 操作：**删除**违规评论。

#### 3. 用户管理 (User Management)
- **用户列表**：支持按 ID、昵称、手机号搜索。
- **详情查看**：查看用户基本信息、发布历史。
- **封禁/解封**：修改用户 `status` 状态。封禁后用户 Token 失效，无法登录。

### 13.5 API 设计 (Admin 命名空间)

所有接口需通过 `RolesGuard` 校验 `role === 1`。

| 方法 | 路径 | 描述 |
| :--- | :--- | :--- |
| POST | `/admin/auth/login` | 管理员登录 (返回 Token) |
| GET | `/admin/stats/overview` | 获取仪表盘统计数据 |
| GET | `/admin/users` | 分页获取用户列表 |
| PATCH | `/admin/users/:id/status` | 封禁/解封用户 `{ status: 0/1 }` |
| GET | `/admin/notes` | 分页获取笔记 (支持按 status 筛选) |
| PATCH | `/admin/notes/:id/audit` | 审核笔记 `{ status: 1/3, reason: "..." }` |
| DELETE | `/admin/comments/:id` | 删除评论 |

### 13.6 安全策略
1.  **独立鉴权**：管理员接口 (`/admin/*`) 必须校验管理员权限，防止普通用户越权调用。
2.  **操作审计**：所有写操作（增删改）必须写入 `admin_logs` 表。
3.  **敏感数据脱敏**：后台展示用户手机号时需进行脱敏处理（如 `138****1234`）。
